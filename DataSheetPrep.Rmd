---
title: "DataSheet"
author: "Parker Bausman"
date: "2024-07-24"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
```

## Preparing data for modeling :) 

Steps 
take nemo and all other sheets
group by date, pond, sample, direction 


```{r}
Float1 <- read.csv("C:/Users/Parke/OneDrive/Documents/MS Thesis/Data/FLOAT23-MB.csv", header=TRUE)
Float2 <- read.csv("C:/Users/Parke/OneDrive/Documents/MS Thesis/Data/FLOAT23-PB.csv", header=TRUE)
```



```{r}
#combine data 
Float <- rbind(subsetFloat,subsetFloat2022)
```


```{r}
#read in LW data 
lw<-read.csv("C:/Users/Parke/OneDrive/Documents/MS Thesis/Data/LW-Float.csv",header=TRUE)
head(lw)
```


```{r}
#merge float data and LW data 
Float <- merge(Float, lw, by="ID", all=T)
```

```{r}
# calculating log (dry weight) from length
Float$logDW <- with(Float, a + (b * log((Length), base=base)))

#untransforming log (dry weight) to dry weight (mg)
Float$DW <- with(Float, (base^(logDW)))
```

```{r}
#now multiply dry weight by number of individuals 
Float$SampleDW <- NA

Float$SampleDW <- (Float$DW * Float$Count)
```

```{r}
#Pair down to cols needed 
Float <- Float[, c(1,2,3,4,5,14)]
```

```{r}
#Separate by nemo or no nemo 
FloatNemo <- subset(Float, ID %in% c("hostilis"))
FloatOther <- subset(Float, ID %in% c("Antisoptera", "Zygoptera", "nigriculus",  "Midges","Ceratopogonidae","Diptera", "Mosquito", "externus"))
```

```{r}
#summarize by sample
FloatNemo <- FloatNemo %>%
  group_by( Date, Pond, Direction) %>%
  summarize(Total_SampleDW = sum(SampleDW))
```
```{r}
#summarize by sample
FloatOther <- FloatOther %>%
  group_by( Date, Pond, Direction) %>%
  summarize(Total_SampleDW = sum(SampleDW))
```





### FLOAT OTHER IS PRODUCING NAs ??? 

```{r}
#add nemo non nemo col to each
FloatNemo$ID <- "Nemo"
FloatOther$ID <- "Other"

```

```{r}
FloatAll <- rbind(FloatNemo, FloatOther)

FloatAll$Date <- as.factor(FloatAll$Date)
```


```{r}
#now separate 2022 and 2023 to see if different 
floating2023 <- FloatAll[!grepl("22", FloatAll$Date), ]
floating2022 <- FloatAll[!grepl("23", FloatAll$Date), ]
```


```{r}
model <- lm(FloatAll$Total_SampleDW ~ FloatAll$ID + FloatAll$Date)
summary(model)
```

```{r}
model22 <- lm(floating2022$Total_SampleDW ~ floating2022$ID + floating2022$Date)
summary(model22)
```
```{r}
model23 <- lm(floating2023$Total_SampleDW ~ floating2023$ID + floating2023$Date)
summary(model23)
```
```{r}
#now look at just pond 1 in 2022 
pond1floating2022 <- floating2022[grepl("1", floating2022$Pond), ]
#remove pond 12 from pond1floating2022
pond1floating2022 <- pond1floating2022[!grepl("12", pond1floating2022$Pond), ]
```

```{r}
#now model 
modelpond1 <- lm(pond1floating2022$Total_SampleDW ~ pond1floating2022$ID + pond1floating2022$Date)
summary(modelpond1)
```


